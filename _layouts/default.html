<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}" data-theme="">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {% seo %}

    <!-- Set theme BEFORE paint to avoid flash -->
    <script>
      (function() {
        try {
          var stored = localStorage.getItem('theme');
          var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          var theme = stored || (prefersDark ? 'dark' : 'light');
          document.documentElement.setAttribute('data-theme', theme);
        } catch(e) {}
      })();
    </script>

    <!-- Minimaâ€™s core CSS -->
    <link
      rel="stylesheet"
      href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}"
    />

    <!-- Your overrides -->
    <link
      rel="stylesheet"
      href="{{ "/assets/css/custom.css" | relative_url }}"
    />
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="wrapper" style="display:flex;align-items:center;gap:1rem;justify-content:space-between;">
        <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title }}</a>

        <nav class="site-nav" style="margin-left:auto;">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">â˜°</span>
          </label>
          <div class="trigger">
            <a class="page-link" href="/bafta-scripted-comedy/">BAFTA Scripted Comedy Awards</a>
          </div>
        </nav>

        <!-- Theme toggle button -->
        <button id="themeToggle" class="theme-btn" type="button" aria-label="Toggle theme">
          <span class="theme-icon" aria-hidden="true">ðŸŒ“</span>
          <span id="themeLabel">Light</span>
        </button>
      </div>
    </header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    <footer class="site-footer h-card">
      <div class="wrapper">
        <div class="footer-col footer-col-2" style="text-align:center;width:100%">
          Â© {{ site.time | date: "%Y" }} Mason Colborn
        </div>
      </div>
    </footer>

    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>

    <!-- Theme logic -->
    <script>
      (function() {
        var label = document.getElementById('themeLabel');
        var btn   = document.getElementById('themeToggle');

        function setLabel(theme) {
          if (label) label.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
        }

        function currentTheme() {
          return document.documentElement.getAttribute('data-theme') || 'light';
        }

        function apply(theme) {
          document.documentElement.setAttribute('data-theme', theme);
          try { localStorage.setItem('theme', theme); } catch(e) {}
          setLabel(theme);
        }

        // init label
        setLabel(currentTheme());

        if (btn) {
          btn.addEventListener('click', function() {
            var theme = currentTheme() === 'dark' ? 'light' : 'dark';
            apply(theme);
          });
        }

        // optional: live-update if system preference changes AND user hasn't chosen manually
        try {
          var stored = localStorage.getItem('theme');
          if (!stored && window.matchMedia) {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
              apply(e.matches ? 'dark' : 'light');
            });
          }
        } catch(e) {}
      })();
    </script>
  </body>
</html>

